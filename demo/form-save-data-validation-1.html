<!DOCTYPE HTML>
<title>form</title>

<form action method=post is=save-data
    data-validator=validator data-saver=saver data-next=next>
  <p><action-status
         stage-formdata="Collecting form data..."
         stage-formvalidator=Validating...
         stage-saver=Saver...
         stage-formsaved=Postprocessing...
         ok=Saved></action-status>
  <p><button type=submit>Submit</button>
  <input-control formcontrol></input-control>
</form>

<script>
  var handler = document.createElementNS ('data:,pc', 'formvalidator');
  handler.setAttribute ('name', 'validator');
  handler.pcHandler = function (args) {
    return new Promise (ok => {
      setTimeout (ok, 3000);
    });
  };
  document.head.appendChild (handler);
  
  var handler = document.createElementNS ('data:,pc', 'formsaved');
  handler.setAttribute ('name', 'next');
  handler.pcHandler = function (args) {
    return new Promise (ok => {
      setTimeout (ok, 3000);
    });
  };
  document.head.appendChild (handler);
  
  var handler = document.createElementNS ('data:,pc', 'saver');
  handler.setAttribute ('name', 'saver');
  handler.pcHandler = function (args) {
    return new Promise (ok => {
      setTimeout (ok, 3000);
    });
  };
  document.head.appendChild (handler);
  
  var handler = document.createElementNS ('data:,pc', 'element');
  handler.pcDef = {
    name: 'input-control',
    props: {
      pcInit: function () { },
      pcModifyFormData: function (fd) {
        return new Promise (ok => {
          setTimeout (ok, 3000);
        });
      },
    },
  };
  document.head.appendChild (handler);
</script>

<script src=../src/page-components.js async></script>
