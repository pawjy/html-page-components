HTML page components
~~~~~~~~~~~~~~~~~~~~

* <button is=command-button>

A |button| element whose |is| attribute value is |command-button|
represents a command button.  (Be aware that this implementation does
not support mutation of |is| attribute; it must be set to a value
before the element's insertion into the document.)

The element must has a |data-selector| attribute.  Its value is a
group of selectors that selects an element in the document.

The element must has a |data-command| attribute whose value is the
name of the command.

When the element is clicked, the command specified by the
|data-command| attribute value of the element selected by the
|data-selector| attribute value is invoked.

A command whose name is /name/ for element /element/ can be defined by
setting these two values:

  element.cbCommands[name]   An object.  It can have any property.
  element[name]  A function.  This is the method implementing the command.

* <image-editor>

An |image-editor| element represents an image editor.

An element can have an image.  Initially, it has no image.  If and
only if the element has an image, it has |has-image| class.  When the
element has no image, the user can click the element to open a user
interface to select a image (i.e. manually invoking the
|selectImageFromFile| method).  In this mode, the |clickmode|
attribute of the element is set to |selectImage|.  In addition, the
user can drop an image file to the element.  When the user is dragging
an image file over the element, the |drop-target| class is set to the
element.

There are these object properties:

  height

    The element's height, in pixels.  It is set to the element's
    image's height when an image is selected.

  width

    The element's width, in pixels.  It is set to the element's
    iamge's width when an image is selected.

There are these methods:

  selectImageByURL (url : String) : Promise

    Selects an image specified by the URL /url/.  It returns a promise
    which is fulfilled once the image has been loaded.  It is rejected
    if the image cannot be loaded.

  selectImageFromFile () : Promise

    Selects an image by showing a user interface to choose a file.  It
    returns a promise which is fulfilled once the image has been
    loaded.  It is rejected if the image cannot be loaded.  This is a
    |command-button| command.

  getPNGBlob () : Promise

    Serializes the element's image as a PNG file.  It returns a
    promise which is fulfilled with a Blob of that file.

  getJPEGBlob () : Promise

    Serializes the element's image as a JPEG file.  It returns a
    promise which is fulfilled with a Blob of that file.

The |resize| event is fired at the element when the element is
initialized and whenever the element's width or height has been
changed.  Note that the event is not fired when a new image is
selected but both width and height are unchanged.

The |change| event is fired at the element when the element is
initialized and whenever the element's image is selected.

* Author

Wakaba <wakaba@suikawiki.org>.

* License

Copyright 2017 Wakaba <wakaba@suikawiki.org>.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Affero General Public License for more details.

You does not have received a copy of the GNU Affero General Public
License along with this program, see <https://www.gnu.org/licenses/>.
